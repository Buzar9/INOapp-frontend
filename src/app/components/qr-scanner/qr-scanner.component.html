<div class="scanner-container">
  <div class="scanner-area">
    <ngx-scanner-qrcode #action="scanner" [config]="config" (event)="onEvent($event, action)"></ngx-scanner-qrcode>

    <div *ngIf="action.isLoading" class="loading-overlay">
      <p-progressSpinner styleClass="custom-spinner" strokeWidth="4"></p-progressSpinner>
      <p class="loading-text">Uruchamianie kamery...</p>
    </div>
  </div>

  <div class="controls">
    <button pButton pRipple
            class="control-button file-button"
            icon="pi pi-folder-open"
            (click)="fileInput.click()"
            pTooltip="Wybierz plik z QR kodem"
            tooltipPosition="bottom">
    </button>

    <button *ngIf="isTorchAvailable"
            pButton pRipple
            class="control-button torch-button"
            [class.torch-active]="isTorchOn"
            icon="pi pi-bolt"
            (click)="toggleTorch()"
            [pTooltip]="isTorchOn ? 'Wyłącz latarkę' : 'Włącz latarkę'"
            tooltipPosition="bottom">
    </button>

    <button pButton pRipple
            class="control-button close-button"
            icon="pi pi-times"
            (click)="closeScanner()"
            pTooltip="Zamknij skaner"
            tooltipPosition="bottom">
    </button>
  </div>

  <input #fileInput type="file" (change)="onSelects(fileInput.files)" [multiple]="'multiple'" [accept]="'.jpg, .png, .gif, .jpeg'"
         style="display: none;"/>

  <div *ngFor="let item of qrCodeResult" class="file-scan-result">
    <ngx-scanner-qrcode #actionFile="scanner" [src]="item.url" [config]="config"
                        (event)="onEvent($event)"></ngx-scanner-qrcode>
  </div>
</div>
