/* Container */
.container{height:100dvh;width:100vw;overflow:hidden;position:relative;-webkit-overflow-scrolling:touch}

/* Top Stats Bar */
.top-texts{position:absolute;top:0;left:50%;transform:translateX(-50%);background:rgba(40,48,40,.85);color:var(--color-text);padding:.8rem 1.5rem;display:flex;justify-content:center;align-items:center;gap:2rem;z-index:10;font-size:.9rem;box-shadow:0 2px 8px rgba(0,0,0,.3);border-radius:var(--radius);min-height:50px;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);white-space:nowrap}
.top-texts span{display:flex;align-items:center;gap:.5rem;font-weight:600}
.top-texts i{font-size:1.1rem;color:var(--color-accent)}

/* Map & Scanner positioning */
participant-map{position:absolute;inset:0;z-index:1}
qr-scanner{background:var(--color-panel)}
.fullscreen-mode{position:fixed;inset:0;z-index:1000;background:var(--color-background)}

/* Scanning Overlay - bottom */
.scanning-overlay{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%);z-index:2000;animation:fadeInSlideUp .3s ease-out}
.scanning-content{display:flex;flex-direction:row;align-items:center;gap:.6rem;color:var(--color-text-light);padding:.6rem 1rem;background:rgba(40,48,40,.95);border-radius:var(--radius);box-shadow:0 4px 16px rgba(0,0,0,.5);border:1px solid var(--color-accent);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);text-align:left}
.scanning-content h2{margin:0;font-size:.9rem;font-weight:600;color:var(--color-text-light)}
.scanning-content p{display:none}
.scanning-content ::ng-deep .custom-spinner{width:24px!important;height:24px!important}
@keyframes fadeInSlideUp{from{opacity:0;transform:translateX(-50%) translateY(20px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}

/* Hamburger button (top-right, always fixed) */
.hamburger-menu-button{position:fixed;top:1rem;right:1rem;z-index:1002;width:2.75rem!important;height:2.75rem!important;min-width:44px!important;min-height:44px!important;border-radius:50%!important;background:rgba(40,48,40,.65)!important;border:1px solid var(--color-accent)!important;color:var(--color-accent)!important;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease;padding:0!important;-webkit-tap-highlight-color:transparent;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);outline:none!important;box-shadow:0 4px 12px rgba(0,0,0,.4)}
.hamburger-menu-button:hover{background:rgba(40,48,40,.8)!important;transform:scale(1.05)}
.hamburger-menu-button:active{transform:scale(.95);background:rgba(40,48,40,.75)!important}
.hamburger-menu-button:focus{outline:none!important;background:rgba(40,48,40,.65)!important}
.hamburger-menu-button .pi{text-shadow:0 0 8px rgba(0,0,0,.8),0 0 4px rgba(0,0,0,.9);filter:drop-shadow(0 1px 2px rgba(0,0,0,.8))}

/* QR button specific (inside floating-buttons container) */
.qr-scanner-icon{width:3.5rem!important;height:3.5rem!important;min-width:56px!important;min-height:56px!important;border-radius:50%!important;background:rgba(40,48,40,.65)!important;border:1px solid var(--color-accent)!important;color:var(--color-accent)!important;box-shadow:0 4px 16px rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;padding:0!important;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.qr-scanner-icon:hover{background:rgba(40,48,40,.8)!important;color:var(--color-text-light);transform:scale(1.08);box-shadow:0 6px 20px rgba(0,0,0,.5)}
.qr-scanner-icon:active{transform:scale(.95)}
.qr-scanner-icon.scanning{opacity:.5;cursor:not-allowed;pointer-events:none}
.qr-scanner-icon .pi{font-size:1.8rem;text-shadow:0 0 8px rgba(0,0,0,.8),0 0 4px rgba(0,0,0,.9);filter:drop-shadow(0 1px 2px rgba(0,0,0,.8))}

/* Top Bars */
.compact-top-bar{position:fixed;top:1rem;left:1rem;display:flex;gap:.8rem;align-items:center;z-index:1000;background:rgba(40,48,40,.65);padding:.5rem .8rem;border-radius:var(--radius);box-shadow:0 2px 8px rgba(0,0,0,.4);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.finish-top-bar{position:fixed;top:1rem;left:1rem;display:flex;gap:.8rem;align-items:center;z-index:1000;background:rgba(40,48,40,.65);padding:.5rem .8rem;border-radius:var(--radius);box-shadow:0 2px 8px rgba(0,0,0,.4);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}

/* GPS Indicator */
.gps-indicator{display:flex;align-items:center;justify-content:center;width:1.5rem;height:1.5rem;border-radius:50%;transition:all .3s ease}
.gps-indicator i{font-size:1rem;transition:color .3s ease}
.gps-indicator.active{background:rgba(76,175,80,.2)}
.gps-indicator.active i{color:#4caf50;animation:gps-pulse 2s ease-in-out infinite}
.gps-indicator.searching{background:rgba(255,193,7,.2)}
.gps-indicator.searching i{color:#ffc107;animation:gps-blink 1s ease-in-out infinite}
.gps-indicator.off{background:rgba(244,67,54,.15)}
.gps-indicator.off i{color:#f44336;opacity:.7}
@keyframes gps-pulse{0%,100%{opacity:1}50%{opacity:.6}}
@keyframes gps-blink{0%,100%{opacity:1}50%{opacity:.3}}
.compact-stat{display:flex;align-items:center;gap:.4rem;font-weight:600;font-size:.9rem;color:var(--color-text);white-space:nowrap}
.compact-stat i{font-size:1rem;color:var(--color-accent)}
.finish-top-bar .p-button-danger{background:rgba(40,48,40,.85)!important;border:1px solid var(--color-danger,#dc3545)!important;color:var(--color-danger,#dc3545)!important;width:2.2rem!important;height:2.2rem!important;padding:0!important}
.finish-top-bar .p-button-danger:hover{background:var(--color-danger,#dc3545)!important;color:var(--color-text-light)!important;transform:scale(1.05)}

/* Menu Options */
.menu-options{display:flex;flex-direction:column;gap:1rem}

/* Menu Sections */
.menu-section{display:flex;flex-direction:column;gap:.6rem;padding-bottom:1rem;border-bottom:1px solid var(--color-border)}
.menu-section:last-child{border-bottom:none;padding-bottom:0}
.menu-section-title{font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:var(--color-accent);margin-bottom:.4rem;padding-left:.2rem}

/* Menu Option Buttons */
.menu-option-button{width:100%;justify-content:flex-start;padding:.9rem 1rem;font-size:1rem;min-height:48px;background:rgba(40,48,40,.7)!important;border:1px solid var(--color-accent)!important;color:var(--color-accent)!important;transition:all .2s ease;border-radius:var(--radius)!important}
.menu-option-button:hover{background:var(--color-accent)!important;color:var(--color-text-light)!important}
.menu-option-button:active{transform:scale(.98)}
.menu-option-button .pi{font-size:1.1rem;margin-right:.4rem}

/* Menu Setting Row (inline label + dropdown) */
.menu-setting-row{display:flex;align-items:center;justify-content:space-between;padding:.6rem .8rem;background:rgba(40,48,40,.5);border-radius:var(--radius);min-height:48px}
.menu-setting-label{display:flex;align-items:center;gap:.6rem;color:var(--color-text-light);font-weight:500;font-size:.95rem}
.menu-setting-label i{color:var(--color-accent);font-size:1.1rem}

/* Menu Dropdown */
::ng-deep .menu-dropdown{min-width:110px}
::ng-deep .menu-dropdown .p-dropdown{background:rgba(30,40,30,.8)!important;border:1px solid var(--color-accent)!important;border-radius:var(--radius)!important;min-height:40px}
::ng-deep .menu-dropdown .p-dropdown-label{color:var(--color-accent)!important;font-weight:600;font-size:.9rem;padding:.5rem .8rem}
::ng-deep .menu-dropdown .p-dropdown-trigger{color:var(--color-accent)!important}

/* Dropdown Panel - appendTo="body" - style globalne */
::ng-deep .p-dropdown-panel.menu-dropdown-panel,
::ng-deep body > .p-dropdown-panel{z-index:10000!important;background:var(--color-panel,#1a1f1a)!important;border:1px solid var(--color-accent,#b87333)!important;border-radius:8px!important;box-shadow:0 8px 32px rgba(0,0,0,.6)!important;overflow:hidden}
::ng-deep body > .p-dropdown-panel .p-dropdown-items-wrapper{max-height:300px!important}
::ng-deep body > .p-dropdown-panel .p-dropdown-item{color:var(--color-text,#c4c4c4)!important;padding:.75rem 1rem!important;font-size:.95rem;min-height:44px;display:flex;align-items:center}
::ng-deep body > .p-dropdown-panel .p-dropdown-item:hover{background:rgba(184,115,51,.25)!important}
::ng-deep body > .p-dropdown-panel .p-dropdown-item.p-highlight{background:var(--color-accent,#b87333)!important;color:var(--color-text-light,#f5f5f5)!important}

/* Menu Warning */
.menu-warning{display:flex;align-items:center;gap:.6rem;padding:.6rem .8rem;background:rgba(244,67,54,.15);border:1px solid rgba(244,67,54,.4);border-radius:var(--radius);font-size:.85rem;color:#ef9a9a}
.menu-warning i{color:#f44336;font-size:1rem;flex-shrink:0}

/* GPS Tracking Finished Info */
.gps-tracking-finished-info{display:flex;align-items:center;gap:.8rem;padding:.8rem 1rem;background:rgba(76,175,80,.15);border:1px solid rgba(76,175,80,.4);border-radius:var(--radius);color:#81c784;font-size:.95rem}
.gps-tracking-finished-info i{font-size:1.2rem}

/* GPS Mode Selector */
.gps-mode-selector{display:flex;flex-direction:column;gap:.8rem;margin-bottom:1.5rem}
.gps-mode-option{display:flex;align-items:center;padding:.8rem 1rem;background:rgba(30,40,30,.7);border:1px solid var(--color-accent);border-radius:var(--radius);cursor:pointer;transition:all var(--transition)}
.gps-mode-option:hover{background:rgba(184,115,51,.15)}
.gps-mode-option.selected{background:var(--color-accent);box-shadow:0 0 10px rgba(184,115,51,.3)}
.gps-mode-option.selected .gps-mode-label,.gps-mode-option.selected .gps-mode-description{color:var(--color-text-light)}
.gps-mode-radio{width:1.2rem;height:1.2rem;border:1px solid var(--color-accent);border-radius:50%;margin-right:1rem;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.gps-mode-option.selected .gps-mode-radio{border-color:var(--color-text-light)}
.gps-mode-radio::after{content:'';width:.6rem;height:.6rem;border-radius:50%;background:var(--color-accent);opacity:0;transition:opacity var(--transition)}
.gps-mode-option.selected .gps-mode-radio::after{opacity:1;background:var(--color-text-light)}
.gps-mode-info{flex:1}
.gps-mode-label{font-weight:600;color:var(--color-text-light);font-size:1rem;display:block;margin-bottom:.2rem}
.gps-mode-description{font-size:.85rem;color:var(--color-text);opacity:.8}

/* GPS Status */
.gps-status-info{padding:1rem;background:rgba(30,40,30,.7);border:1px solid var(--color-accent);border-radius:var(--radius);margin-top:1.5rem}
.gps-status-item{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;color:var(--color-text)}
.gps-status-item:not(:last-child){border-bottom:1px solid rgba(184,115,51,.3)}
.gps-status-label{font-weight:600;color:var(--color-text-light)}
.gps-status-value{color:var(--color-accent);font-weight:600}
.gps-auto-adjust{display:flex;align-items:center;justify-content:space-between;padding:1rem;background:rgba(30,40,30,.7);border:1px solid var(--color-accent);border-radius:var(--radius);margin-top:1rem}
.gps-auto-adjust-label{color:var(--color-text-light);font-weight:600}
.gps-warning{margin-top:1.5rem;padding:1rem;background:rgba(139,37,0,.2);border:1px solid #8b2500;border-radius:var(--radius);color:var(--color-text);font-size:.9rem}
.gps-warning i{color:#ff6b6b;margin-right:.5rem}

/* Floating Buttons Container */
.floating-buttons{position:fixed;bottom:2rem;right:2rem;z-index:1001;display:flex;flex-direction:column;gap:1rem;align-items:flex-end}

/* Tracking Mode Floating Button */
.tracking-mode-floating-button{width:3.5rem!important;height:3.5rem!important;min-width:56px!important;min-height:56px!important;border-radius:50%!important;background:rgba(40,48,40,.65)!important;border:1px solid var(--color-accent)!important;color:var(--color-accent)!important;box-shadow:0 4px 16px rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s ease;padding:0!important;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.tracking-mode-floating-button:hover{background:rgba(40,48,40,.8)!important;color:var(--color-text-light);transform:scale(1.08);box-shadow:0 6px 20px rgba(0,0,0,.5)}
.tracking-mode-floating-button.active{background:var(--color-accent)!important;color:var(--color-text-light)!important;animation:pulse 2s ease-in-out infinite}
.tracking-mode-floating-button .pi{font-size:1.8rem}

/* Dialog styles */
::ng-deep .hamburger-menu-dialog .p-dialog{width:90%;max-width:320px}
::ng-deep .hamburger-menu-dialog .p-dialog-header{background:var(--color-panel);color:var(--color-text);border-bottom:1px solid var(--color-border);padding:1rem}
::ng-deep .hamburger-menu-dialog .p-dialog-content{background:var(--color-panel);padding:1rem}
::ng-deep .gps-settings-dialog .p-dialog{background:var(--color-panel);border:1px solid var(--color-accent);border-radius:var(--radius);box-shadow:0 12px 40px rgba(0,0,0,.8);max-width:500px;width:90vw}
::ng-deep .gps-settings-dialog .p-dialog-header{background:var(--color-panel);color:var(--color-text-light);border-bottom:1px solid var(--color-accent);padding:1.2rem}
::ng-deep .gps-settings-dialog .p-dialog-content{background:var(--color-panel);color:var(--color-text);padding:1.5rem}
::ng-deep .tracking-mode-info-dialog .p-dialog{background:var(--color-panel);border:2px solid var(--color-accent);border-radius:var(--radius);box-shadow:0 12px 40px rgba(0,0,0,.9);max-width:500px;width:90vw;position:fixed;top:2rem;left:50%;transform:translateX(-50%);margin:0}
::ng-deep .tracking-mode-info-dialog .p-dialog-header{background:var(--color-panel);color:var(--color-text-light);border-bottom:2px solid var(--color-accent);padding:1.2rem;text-align:center}
::ng-deep .tracking-mode-info-dialog .p-dialog-content{background:var(--color-panel);color:var(--color-text);padding:1.5rem}

/* Tracking Mode Info Content */
.tracking-mode-info-content{display:flex;flex-direction:column;gap:1.2rem}

/* Dark Mode Preview */
.preview-label{margin:0;font-size:.9rem;color:var(--color-text);text-align:center;opacity:.8}
.tracking-mode-preview{background:#000;border-radius:var(--radius);padding:1.5rem;display:flex;flex-direction:column;align-items:center;gap:.8rem;border:1px solid rgba(74,103,65,.3)}
.preview-time{font-size:2rem;font-weight:600;color:#4a6741;font-family:'Courier New',monospace;letter-spacing:2px}
.preview-gps-indicator{width:24px;height:24px;border-radius:50%;background:rgba(74,103,65,.2);display:flex;align-items:center;justify-content:center}
.preview-gps-indicator i{color:#4a6741;font-size:14px}
.preview-battery{font-size:.9rem;color:#4a6741;font-family:'Courier New',monospace;display:flex;align-items:center;gap:4px}
.preview-battery i{font-size:.9rem}
.preview-status-row{display:flex;align-items:center;gap:1.5rem}

.info-features{display:flex;flex-direction:column;gap:.6rem}
.info-feature{display:flex;align-items:center;gap:.8rem;padding:.5rem .6rem;background:rgba(30,40,30,.5);border-radius:var(--radius)}
.info-feature i{color:var(--color-accent);font-size:1.1rem;flex-shrink:0}
.info-feature span{color:var(--color-text);font-size:.9rem}
.info-hint{display:flex;align-items:center;gap:.8rem;padding:.7rem;background:rgba(184,115,51,.12);border:1px solid rgba(184,115,51,.25);border-radius:var(--radius)}
.info-hint i{color:var(--color-accent);font-size:1rem;flex-shrink:0}
.info-hint span{color:var(--color-text);font-size:.85rem;line-height:1.3}
.info-actions{display:flex;flex-direction:column;align-items:center;gap:.6rem;margin-top:.3rem}
.info-actions button{width:100%;padding:.9rem;font-size:1rem;border-radius:var(--radius);min-height:48px}
.info-cancel-link{color:var(--color-text);font-size:.9rem;cursor:pointer;padding:.4rem .8rem;opacity:.6;transition:opacity .2s}
.info-cancel-link:hover{opacity:1;text-decoration:underline}

/* Keyframes */
@keyframes slideInUp{from{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes pulse{0%,100%{box-shadow:0 4px 12px rgba(184,115,51,.6)}50%{box-shadow:0 4px 20px rgba(184,115,51,1)}}

/* Media Queries */

@media (max-width:768px){
  .top-texts{left:1rem;right:1rem;transform:none;padding:.6rem 1rem;gap:1rem;font-size:.8rem;width:auto;max-width:calc(100vw - 2rem)}
  .top-texts span{font-size:.8rem}
  .top-texts i{font-size:1rem}
  ::ng-deep .tracking-mode-info-dialog .p-dialog{top:1rem;width:95vw}
}

@media (max-width:480px){
  .top-texts{gap:.8rem;font-size:.75rem;padding:.5rem .8rem;min-height:45px;justify-content:space-around}
  .top-texts span{font-size:.75rem;gap:.3rem}
  .top-texts i{font-size:.9rem}
  ::ng-deep .tracking-mode-info-dialog .p-dialog{top:0.5rem}
  .hamburger-menu-button{top:.5rem;right:.5rem;width:2.75rem!important;height:2.75rem!important;min-width:44px!important;min-height:44px!important}
  .compact-top-bar,.finish-top-bar{top:.5rem;left:.5rem;padding:.4rem .6rem;gap:.6rem}
  .compact-stat{font-size:.85rem;gap:.3rem}
  .compact-stat i{font-size:.9rem}
  .qr-scanner-icon{width:3rem!important;height:3rem!important;min-width:48px!important;min-height:48px!important}
  .qr-scanner-icon .pi{font-size:1.6rem}
  .scanning-overlay{bottom:1rem}
  .scanning-content{padding:.5rem .8rem;gap:.5rem}
  .gps-mode-option{padding:.6rem .8rem}
  .gps-mode-label{font-size:.9rem}
  .gps-mode-description{font-size:.8rem}
  .floating-buttons{bottom:1.5rem;right:1.5rem;gap:.8rem}
  .tracking-mode-floating-button{width:3rem!important;height:3rem!important;min-width:48px!important;min-height:48px!important}
  .tracking-mode-floating-button .pi{font-size:1.6rem}
}

@media (max-width:360px){
  .top-texts{padding:.5rem .6rem;min-height:40px;flex-wrap:wrap;gap:.3rem}
  .top-texts span{gap:.25rem}
  .hamburger-menu-button{width:2.75rem!important;height:2.75rem!important;min-width:44px!important;min-height:44px!important}
  .compact-top-bar,.finish-top-bar{left:.5rem;padding:.3rem .5rem;gap:.4rem}
  .compact-stat{font-size:.8rem}
  .qr-scanner-icon{width:2.75rem!important;height:2.75rem!important;min-width:44px!important;min-height:44px!important}
  .qr-scanner-icon .pi{font-size:1.4rem}
  .scanning-overlay{bottom:.8rem}
  .scanning-content{padding:.4rem .6rem;gap:.4rem}
  .floating-buttons{bottom:1rem;right:1rem;gap:.6rem}
  .tracking-mode-floating-button{width:2.75rem!important;height:2.75rem!important;min-width:44px!important;min-height:44px!important}
  .tracking-mode-floating-button .pi{font-size:1.4rem}
}

@media (orientation:landscape) and (max-height:500px){.top-texts{padding:.4rem .6rem;font-size:.75rem;min-height:35px}}
